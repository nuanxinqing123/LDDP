import{d as T,r as B,e as O,aJ as C,A as F,B as g,aG as e,aF as t,aL as o,E as A,aI as Z,aT as p,aU as ee,b7 as te,bO as ae,bQ as ue,bP as oe,bM as ne,aR as le,b1 as se,b0 as ie,b6 as ce,aW as de,bH as re,bI as _e}from"./arco.d4bcacf5.js";import{o as b,_ as pe}from"./index.408bb41d.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css                *//* empty css               */import{h as S}from"./moment.9709ab41.js";import"./chart.b90db84f.js";import"./vue.5c43e2ab.js";function me(n){return b.get(`/v3/api/tickets/division/data?page=${n}`)}function fe(n){return b.post("/v3/api/tickets/add",n)}function ke(n){return b.get(`/v3/api/tickets/search?type=${n.fc}&state=${n.state}&s=${n.data}`)}function Ce(n){return b.delete("/v3/api/tickets/delete",{data:n})}function be(){return b.get("/v3/api/tickets/data/download",{isDownload:!0})}var ye=function(n,d,u,l){var y=typeof l<"u"?[l,n]:[n],m=new Blob(y,{type:u||"application/octet-stream"});if(typeof window.navigator.msSaveBlob<"u")window.navigator.msSaveBlob(m,d);else{var r=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(m):window.webkitURL.createObjectURL(m),s=document.createElement("a");s.style.display="none",s.href=r,s.setAttribute("download",d),typeof s.download>"u"&&s.setAttribute("target","_blank"),document.body.appendChild(s),s.click(),setTimeout(function(){document.body.removeChild(s),window.URL.revokeObjectURL(r)},200)}};const ve={key:0},De={key:1},he=T({__name:"table-data",setup(n){const d={current:1,pageSize:20},u=B({tickets_key_count:null,tickets_key_points:null,tickets_key_prefix:"",tickets_key_remarks:""}),l=B({fc:"",state:"",data:""}),y=B({id:0}),m=[{title:"ID",dataIndex:"ID"},{title:"\u5361\u5BC6\u503C",dataIndex:"tickets_key"},{title:"\u70B9\u5238\u6570",dataIndex:"tickets_key_points"},{title:"\u5361\u5BC6\u5907\u6CE8",dataIndex:"tickets_key_remarks"},{title:"\u5361\u5BC6\u72B6\u6001",dataIndex:"tickets_key_state",slotName:"tickets_key_state"},{title:"\u751F\u6210\u65F6\u95F4",dataIndex:"CreatedAt"},{title:"\u64CD\u4F5C",slotName:"optional"}],r=B({table:[]}),s=O(!1),v=O(!1),f=async i=>{await me(i).then(a=>{d.current=a.data.page,r.table=a.data.page_data,r.table.forEach(D=>{D.CreatedAt=S(D.CreatedAt).format("YYYY-MM-DD HH:mm:ss")})})};f(d.current);const R=()=>{s.value=!0},Y=()=>{if(!u.tickets_key_count){p.error("\u5361\u5BC6\u6570\u91CF\u4E0D\u80FD\u4E3A\u7A7A");return}if(!u.tickets_key_points){p.error("\u5361\u5BC6\u4F59\u989D\u4E0D\u80FD\u4E3A\u7A7A");return}fe(u).then(i=>{i.code===2e3&&(f(1),p.success("\u6DFB\u52A0\u6210\u529F"),be().then(a=>{ye(a,"CD-KEY.txt")}))}),s.value=!1},$=()=>{s.value=!1},M=i=>{l.fc=i},N=i=>{l.state=i},H=()=>{v.value=!0},j=()=>{if(!l.fc){p.error("\u68C0\u7D22\u65B9\u6CD5\u4E0D\u80FD\u4E3A\u7A7A");return}if(!l.data){p.error("\u68C0\u7D22\u503C\u4E0D\u80FD\u4E3A\u7A7A");return}ke(l).then(i=>{i.code===2e3&&(p.success("\u68C0\u7D22\u6210\u529F"),l.data="",r.table=i.data,r.table.forEach(a=>{a.CreatedAt=S(a.CreatedAt).format("YYYY-MM-DD HH:mm:ss")}))}),d.current=1,v.value=!1},L=()=>{v.value=!1},P=()=>{f(1)},z=i=>{y.id=i,Ce(y).then(a=>{a.code===2e3&&(p.success("\u5220\u9664\u6210\u529F"),f(d.current))})};return(i,a)=>{const D=C("icon-plus"),h=ee,G=C("icon-search"),J=C("icon-refresh"),K=te,w=ae,Q=C("icon-delete"),W=ue,q=oe,X=ne,E=le,_=se,x=ie,V=ce,I=de,k=re,U=_e;return F(),g(Z,null,[e(h,{type:"outline",onClick:R},{icon:t(()=>[e(D)]),default:t(()=>[o("\u6DFB\u52A0")]),_:1}),o(" \u2002 "),e(h,{type:"outline",onClick:H},{icon:t(()=>[e(G)]),default:t(()=>[o("\u641C\u7D22")]),_:1}),o(" \u2002 "),e(h,{type:"outline",status:"success",onClick:P},{icon:t(()=>[e(J)]),default:t(()=>[o("\u91CD\u7F6E")]),_:1}),e(K),e(q,{pagination:!1,columns:m,data:r.table},{tickets_key_state:t(({record:c})=>[c.tickets_key_state===!0?(F(),g("span",ve,[e(w,{bordered:"",color:"green"},{default:t(()=>[o("\u672A\u4F7F\u7528")]),_:1})])):(F(),g("span",De,[e(w,{bordered:"",color:"red"},{default:t(()=>[o("\u5DF2\u4F7F\u7528")]),_:1})]))]),optional:t(({record:c})=>[e(W,{content:"\u786E\u8BA4\u5220\u9664\u5361\u5BC6\uFF1F",onOk:we=>z(c.ID)},{default:t(()=>[e(h,{type:"text",status:"danger"},{icon:t(()=>[e(Q)]),default:t(()=>[o("\u5220\u9664")]),_:1})]),_:2},1032,["onOk"])]),_:1},8,["data"]),e(X,{style:{float:"right","margin-top":"10px","margin-right":"20px","margin-bottom":"10px"},total:d.current*10,simple:"",onChange:f},null,8,["total"]),e(I,{width:500,visible:s.value,"unmount-on-close":"","ok-text":"\u6DFB\u52A0\u5361\u5BC6",onOk:Y,onCancel:$},{title:t(()=>[o(" \u5361\u5BC6\u65B0\u589E ")]),default:t(()=>[A("div",null,[e(V,{model:u,layout:"vertical"},{default:t(()=>[e(_,{field:"tickets_key_count",label:"\u6DFB\u52A0\u6570\u91CF"},{default:t(()=>[e(E,{modelValue:u.tickets_key_count,"onUpdate:modelValue":a[0]||(a[0]=c=>u.tickets_key_count=c)},null,8,["modelValue"])]),_:1}),e(_,{field:"tickets_key_points",label:"\u5361\u5BC6\u70B9\u5238"},{default:t(()=>[e(E,{modelValue:u.tickets_key_points,"onUpdate:modelValue":a[1]||(a[1]=c=>u.tickets_key_points=c)},null,8,["modelValue"])]),_:1}),e(_,{field:"tickets_key_prefix",label:"\u5361\u5BC6\u524D\u7F00"},{default:t(()=>[e(x,{modelValue:u.tickets_key_prefix,"onUpdate:modelValue":a[2]||(a[2]=c=>u.tickets_key_prefix=c)},null,8,["modelValue"])]),_:1}),e(_,{field:"tickets_key_remarks",label:"\u5361\u5BC6\u5907\u6CE8"},{default:t(()=>[e(x,{modelValue:u.tickets_key_remarks,"onUpdate:modelValue":a[3]||(a[3]=c=>u.tickets_key_remarks=c)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["visible"]),e(I,{width:500,visible:v.value,"unmount-on-close":"","ok-text":"\u68C0\u7D22",onOk:j,onCancel:L},{title:t(()=>[o(" \u5361\u5BC6\u7B5B\u9009 ")]),default:t(()=>[A("div",null,[e(V,{model:l,layout:"vertical"},{default:t(()=>[e(_,{field:"email",label:"\u68C0\u7D22\u5185\u5BB9"},{default:t(()=>[e(U,{placeholder:"\u9009\u62E9\u68C0\u7D22\u9879",onChange:M},{default:t(()=>[e(k,null,{default:t(()=>[o("\u5361\u5BC6\u503C")]),_:1}),e(k,null,{default:t(()=>[o("\u5361\u5BC6\u5907\u6CE8")]),_:1})]),_:1})]),_:1}),e(_,{field:"email",label:"\u68C0\u7D22\u72B6\u6001"},{default:t(()=>[e(U,{placeholder:"\u9009\u62E9\u68C0\u7D22\u9879",onChange:N},{default:t(()=>[e(k,null,{default:t(()=>[o("\u5168\u90E8")]),_:1}),e(k,null,{default:t(()=>[o("\u672A\u4F7F\u7528")]),_:1}),e(k,null,{default:t(()=>[o("\u5DF2\u4F7F\u7528")]),_:1})]),_:1})]),_:1}),e(_,{field:"points",label:"\u6B32\u68C0\u7D22\u5185\u5BB9"},{default:t(()=>[e(x,{modelValue:l.data,"onUpdate:modelValue":a[4]||(a[4]=c=>l.data=c),placeholder:"\u503C\uFF08\u652F\u6301\u6A21\u7CCA\u641C\u7D22\uFF09"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["visible"])],64)}}}),Be={class:"container"},Fe={class:"left-side",style:{"margin-top":"12px"}},ge={class:"panel"},Ae={name:"Task"},xe=T({...Ae,setup(n){return(d,u)=>{const l=C("Breadcrumb");return F(),g("div",Be,[e(l,{items:["\u5361\u5BC6\u7BA1\u7406"]}),A("div",Fe,[A("div",ge,[e(he)])])])}}});const Ge=pe(xe,[["__scopeId","data-v-a3e2c53f"]]);export{Ge as default};
