import{d as e,r as a,e as t,aJ as l,A as o,B as d,aG as s,aF as i,aL as r,E as n,aI as u,aT as m,aU as c,b7 as p,bH as f,bI as _,b1 as b,b0 as x,b6 as v,aW as y,bO as h,bP as j,bM as g,aR as I,aS as V}from"./arco.d4bcacf5.js";import{p as C,q as k,t as D,_ as U}from"./index.0b964313.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{m as Y}from"./moment.b4a440e7.js";import"./chart.b90db84f.js";import"./vue.5c43e2ab.js";import"./_commonjs-dynamic-modules.30ae7933.js";const A={key:0},H={key:1},M={key:2},w={key:0},E={key:1},N=e({__name:"table-data",setup(e){const U={current:1,pageSize:20},N=[{title:"ID",dataIndex:"ID"},{title:"用户UID",dataIndex:"user_id"},{title:"用户邮箱",dataIndex:"email"},{title:"用户点券",dataIndex:"points"},{title:"角色权限",dataIndex:"role",slotName:"role"},{title:"用户状态",dataIndex:"is_state",slotName:"is_state"},{title:"登录IP",dataIndex:"login_ip"},{title:"注册时间",dataIndex:"CreatedAt"},{title:"操作",slotName:"optional"}],O=a({table:[]}),B=a({id:0,email:"",points:0,role:"",is_state:!1}),P=a({fc:"",data:""}),S=t(!1),T=t(!1),q=t("用户"),z=e=>{P.fc=e},F=()=>{T.value=!0},G=()=>{P.fc?P.data?(C(P).then((e=>{2e3===e.code&&(m.success("检索成功"),P.data="",O.table=e.data,O.table.forEach((e=>{e.CreatedAt=Y(e.CreatedAt).format("YYYY-MM-DD HH:mm:ss")})))})),U.current=1,T.value=!1):m.error("检索值不能为空"):m.error("检索方法不能为空")},J=()=>{T.value=!1},L=e=>{"用户"===e?B.role="user":"代理"===e?B.role="proxy":"管理员"===e&&(B.role="admin")},R=async e=>{await k(e).then((e=>{U.current=e.data.page,O.table=e.data.page_data,O.table.forEach((e=>{e.CreatedAt=Y(e.CreatedAt).format("YYYY-MM-DD HH:mm:ss")}))}))};R(U.current);const W=()=>{B.email?B.points<0?m.error("用户余额不能为空"):(B.is_state=!0!==B.is_state,D(B).then((e=>{2e3===e.code&&(R(U.current),m.success(e.data))})),S.value=!1):m.error("用户邮箱不能为空")},K=()=>{S.value=!1},Q=()=>{R(1)};return(e,a)=>{const t=l("icon-search"),m=c,C=l("icon-refresh"),k=p,D=f,Y=_,X=b,Z=x,$=v,ee=y,ae=h,te=l("icon-edit"),le=j,oe=g,de=I,se=V;return o(),d(u,null,[s(m,{type:"outline",onClick:F},{icon:i((()=>[s(t)])),default:i((()=>[r("搜索")])),_:1}),r("   "),s(m,{type:"outline",status:"success",onClick:Q},{icon:i((()=>[s(C)])),default:i((()=>[r("重置")])),_:1}),s(k),s(ee,{width:500,visible:T.value,"unmount-on-close":"","ok-text":"检索",onOk:G,onCancel:J},{title:i((()=>[r(" 用户编辑 ")])),default:i((()=>[n("div",null,[s($,{model:P,layout:"vertical"},{default:i((()=>[s(X,{field:"email",label:"检索内容"},{default:i((()=>[s(Y,{placeholder:"选择检索项",onChange:z},{default:i((()=>[s(D,null,{default:i((()=>[r("用户UID")])),_:1}),s(D,null,{default:i((()=>[r("用户邮箱")])),_:1})])),_:1})])),_:1}),s(X,{field:"points",label:"欲检索内容"},{default:i((()=>[s(Z,{modelValue:P.data,"onUpdate:modelValue":a[0]||(a[0]=e=>P.data=e),placeholder:"值（支持模糊搜索）"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["visible"]),s(le,{pagination:!1,columns:N,data:O.table},{role:i((({record:e})=>["admin"===e.role?(o(),d("span",A,[s(ae,{bordered:"",color:"blue"},{default:i((()=>[r("管理员")])),_:1})])):"proxy"===e.role?(o(),d("span",H,[s(ae,{bordered:"",color:"orange"},{default:i((()=>[r("代理")])),_:1})])):(o(),d("span",M,[s(ae,{bordered:"",color:"gray"},{default:i((()=>[r("用户")])),_:1})]))])),is_state:i((({record:e})=>[!0===e.is_state?(o(),d("span",w,[s(ae,{bordered:"",color:"green"},{default:i((()=>[r("正常")])),_:1})])):(o(),d("span",E,[s(ae,{bordered:"",color:"red"},{default:i((()=>[r("封禁")])),_:1})]))])),optional:i((({record:e})=>[s(m,{type:"text",onClick:a=>(e=>{B.id=e.ID,B.email=e.email,B.points=e.points,B.is_state=!0!==e.is_state,"user"===e.role?(q.value="用户",B.role="user"):"proxy"===e.role?(q.value="代理",B.role="proxy"):"admin"===e.role&&(q.value="管理员",B.role="admin"),S.value=!0})(e)},{icon:i((()=>[s(te)])),default:i((()=>[r("修改")])),_:2},1032,["onClick"])])),_:1},8,["data"]),s(oe,{style:{float:"right","margin-top":"10px","margin-right":"20px","margin-bottom":"10px"},total:10*U.current,simple:"",onChange:R},null,8,["total"]),s(ee,{width:500,visible:S.value,"unmount-on-closeß":"",onOk:W,onCancel:K},{title:i((()=>[r(" 用户编辑 ")])),default:i((()=>[n("div",null,[s($,{model:B,layout:"vertical"},{default:i((()=>[s(X,{field:"email",label:"用户邮箱"},{default:i((()=>[s(Z,{modelValue:B.email,"onUpdate:modelValue":a[1]||(a[1]=e=>B.email=e)},null,8,["modelValue"])])),_:1}),s(X,{field:"points",label:"用户点券"},{default:i((()=>[s(de,{modelValue:B.points,"onUpdate:modelValue":a[2]||(a[2]=e=>B.points=e)},null,8,["modelValue"])])),_:1}),s(X,{field:"is_admin",label:"角色权限"},{default:i((()=>[s(Y,{modelValue:q.value,"onUpdate:modelValue":a[3]||(a[3]=e=>q.value=e),placeholder:"选择角色权限",onChange:L},{default:i((()=>[s(D,null,{default:i((()=>[r("用户")])),_:1}),s(D,null,{default:i((()=>[r("代理")])),_:1}),s(D,null,{default:i((()=>[r("管理员")])),_:1})])),_:1},8,["modelValue"])])),_:1}),s(X,{field:"is_state",label:"是否封禁"},{default:i((()=>[s(se,{modelValue:B.is_state,"onUpdate:modelValue":a[4]||(a[4]=e=>B.is_state=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["visible"])],64)}}}),O={class:"container"},B={class:"left-side",style:{"margin-top":"12px"}},P={class:"panel"},S=U(e({name:"Task",setup:e=>(e,a)=>{const t=l("Breadcrumb");return o(),d("div",O,[s(t,{items:["用户管理"]}),n("div",B,[n("div",P,[s(N)])])])}}),[["__scopeId","data-v-63d05c22"]]);export{S as default};
