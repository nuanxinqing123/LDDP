import{d as e,r as a,e as l,aJ as t,A as o,B as d,aG as s,aF as r,aL as i,E as n,aI as u,aT as m,aU as c,b7 as p,bI as f,bJ as _,b1 as b,b0 as x,b6 as v,aW as y,bP as h,bQ as j,bN as k,aR as I,aS as V}from"./arco.6fa229d2.js";import{p as g,q as C,t as D,_ as U}from"./index.00e3376c.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{m as Y}from"./moment.20765af1.js";import"./chart.f78d3971.js";import"./vue.17197c5c.js";import"./_commonjs-dynamic-modules.30ae7933.js";const A={key:0},H={key:1},M={key:2},N={key:0},w={key:1},E=e({__name:"table-data",setup(e){const U={current:1,pageSize:20},E=[{title:"ID",dataIndex:"ID"},{title:"用户UID",dataIndex:"user_id"},{title:"用户邮箱",dataIndex:"email"},{title:"用户点券",dataIndex:"points"},{title:"角色权限",dataIndex:"role",slotName:"role"},{title:"用户状态",dataIndex:"is_state",slotName:"is_state"},{title:"用户备注",dataIndex:"remarks"},{title:"登录IP",dataIndex:"login_ip"},{title:"注册时间",dataIndex:"CreatedAt"},{title:"操作",slotName:"optional"}],B=a({table:[]}),J=a({id:0,email:"",points:0,role:"",remarks:"",is_state:!1}),O=a({fc:"",data:""}),P=l(!1),S=l(!1),T=l("用户"),q=e=>{O.fc=e},z=()=>{S.value=!0},F=()=>{O.fc?O.data?(g(O).then((e=>{2e3===e.code&&(m.success("检索成功"),O.data="",B.table=e.data,B.table.forEach((e=>{e.CreatedAt=Y(e.CreatedAt).format("YYYY-MM-DD HH:mm:ss")})))})),U.current=1,S.value=!1):m.error("检索值不能为空"):m.error("检索方法不能为空")},G=()=>{S.value=!1},L=e=>{"用户"===e?J.role="user":"代理"===e?J.role="proxy":"管理员"===e&&(J.role="admin")},Q=async e=>{await C(e).then((e=>{U.current=e.data.page,B.table=e.data.page_data,B.table.forEach((e=>{e.CreatedAt=Y(e.CreatedAt).format("YYYY-MM-DD HH:mm:ss")}))}))};Q(U.current);const R=()=>{J.email?J.points<0?m.error("用户余额不能为空"):(J.is_state=!0!==J.is_state,D(J).then((e=>{2e3===e.code&&(Q(U.current),m.success(e.data))})),P.value=!1):m.error("用户邮箱不能为空")},W=()=>{P.value=!1},K=()=>{Q(1)};return(e,a)=>{const l=t("icon-search"),m=c,g=t("icon-refresh"),C=p,D=f,Y=_,X=b,Z=x,$=v,ee=y,ae=h,le=t("icon-edit"),te=j,oe=k,de=I,se=V;return o(),d(u,null,[s(m,{type:"outline",onClick:z},{icon:r((()=>[s(l)])),default:r((()=>[i("搜索")])),_:1}),i("   "),s(m,{type:"outline",status:"success",onClick:K},{icon:r((()=>[s(g)])),default:r((()=>[i("重置")])),_:1}),s(C),s(ee,{width:500,visible:S.value,"unmount-on-close":"","ok-text":"检索",onOk:F,onCancel:G},{title:r((()=>[i(" 用户编辑 ")])),default:r((()=>[n("div",null,[s($,{model:O,layout:"vertical"},{default:r((()=>[s(X,{field:"email",label:"检索内容"},{default:r((()=>[s(Y,{placeholder:"选择检索项",onChange:q},{default:r((()=>[s(D,null,{default:r((()=>[i("用户UID")])),_:1}),s(D,null,{default:r((()=>[i("用户邮箱")])),_:1})])),_:1})])),_:1}),s(X,{field:"points",label:"欲检索内容"},{default:r((()=>[s(Z,{modelValue:O.data,"onUpdate:modelValue":a[0]||(a[0]=e=>O.data=e),placeholder:"值（支持模糊搜索）"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["visible"]),s(te,{pagination:!1,columns:E,data:B.table},{role:r((({record:e})=>["admin"===e.role?(o(),d("span",A,[s(ae,{bordered:"",color:"blue"},{default:r((()=>[i("管理员")])),_:1})])):"proxy"===e.role?(o(),d("span",H,[s(ae,{bordered:"",color:"orange"},{default:r((()=>[i("代理")])),_:1})])):(o(),d("span",M,[s(ae,{bordered:"",color:"gray"},{default:r((()=>[i("用户")])),_:1})]))])),is_state:r((({record:e})=>[!0===e.is_state?(o(),d("span",N,[s(ae,{bordered:"",color:"green"},{default:r((()=>[i("正常")])),_:1})])):(o(),d("span",w,[s(ae,{bordered:"",color:"red"},{default:r((()=>[i("封禁")])),_:1})]))])),optional:r((({record:e})=>[s(m,{type:"text",onClick:a=>(e=>{J.id=e.ID,J.email=e.email,J.points=e.points,J.is_state=!0!==e.is_state,"user"===e.role?(T.value="用户",J.role="user"):"proxy"===e.role?(T.value="代理",J.role="proxy"):"admin"===e.role&&(T.value="管理员",J.role="admin"),P.value=!0})(e)},{icon:r((()=>[s(le)])),default:r((()=>[i("修改")])),_:2},1032,["onClick"])])),_:1},8,["data"]),s(oe,{style:{float:"right","margin-top":"10px","margin-right":"20px","margin-bottom":"10px"},total:10*U.current,simple:"",onChange:Q},null,8,["total"]),s(ee,{width:500,visible:P.value,"unmount-on-closeß":"",onOk:R,onCancel:W},{title:r((()=>[i(" 用户编辑 ")])),default:r((()=>[n("div",null,[s($,{model:J,layout:"vertical"},{default:r((()=>[s(X,{field:"email",label:"用户邮箱"},{default:r((()=>[s(Z,{modelValue:J.email,"onUpdate:modelValue":a[1]||(a[1]=e=>J.email=e)},null,8,["modelValue"])])),_:1}),s(X,{field:"points",label:"用户点券"},{default:r((()=>[s(de,{modelValue:J.points,"onUpdate:modelValue":a[2]||(a[2]=e=>J.points=e)},null,8,["modelValue"])])),_:1}),s(X,{field:"is_admin",label:"角色权限"},{default:r((()=>[s(Y,{modelValue:T.value,"onUpdate:modelValue":a[3]||(a[3]=e=>T.value=e),placeholder:"选择角色权限",onChange:L},{default:r((()=>[s(D,null,{default:r((()=>[i("用户")])),_:1}),s(D,null,{default:r((()=>[i("代理")])),_:1}),s(D,null,{default:r((()=>[i("管理员")])),_:1})])),_:1},8,["modelValue"])])),_:1}),s(X,{field:"remarks",label:"用户备注"},{default:r((()=>[s(Z,{modelValue:J.remarks,"onUpdate:modelValue":a[4]||(a[4]=e=>J.remarks=e)},null,8,["modelValue"])])),_:1}),s(X,{field:"is_state",label:"是否封禁"},{default:r((()=>[s(se,{modelValue:J.is_state,"onUpdate:modelValue":a[5]||(a[5]=e=>J.is_state=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["visible"])],64)}}}),B={class:"container"},J={class:"left-side",style:{"margin-top":"12px"}},O={class:"panel"},P=U(e({name:"Task",setup:e=>(e,a)=>{const l=t("Breadcrumb");return o(),d("div",B,[s(l,{items:["用户管理"]}),n("div",J,[n("div",O,[s(E)])])])}}),[["__scopeId","data-v-63d05c22"]]);export{P as default};
