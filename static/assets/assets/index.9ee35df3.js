import{d as e,r as a,e as t,aJ as l,A as o,B as r,aG as d,aF as c,aL as p,E as n,aI as i,aH as s,aC as u,aM as _,aT as m,aU as j,b0 as f,b1 as b,aR as V,b6 as g,aW as v,bH as x,bI as k,b7 as y,bO as h,bQ as C,bP as I,bM as U,aS as w,bJ as D}from"./arco.d4bcacf5.js";import{_ as Y}from"./index.0b964313.js";/* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css               */import{b as H,u as M,c as A,p as O,d as E}from"./task.2b15c9b3.js";import{m as N}from"./moment.b4a440e7.js";import{g as T}from"./forward.ce9f48b2.js";import"./chart.b90db84f.js";import"./vue.5c43e2ab.js";import"./_commonjs-dynamic-modules.30ae7933.js";const B={key:0},J={key:1},L={key:0},S={key:1},z=e({__name:"table-data",setup(e){const Y={current:1,pageSize:20},z=[{title:"ID",dataIndex:"ID"},{title:"项目类名",dataIndex:"project_type"},{title:"项目价格",dataIndex:"project_price"},{title:"项目代理价格",dataIndex:"project_agent_price"},{title:"项目名称",dataIndex:"project_remarks"},{title:"项目状态",dataIndex:"project_state",slotName:"project_state"},{title:"项目代理状态",dataIndex:"project_agent_state",slotName:"project_agent_state"},{title:"添加时间",dataIndex:"CreatedAt"},{title:"操作",slotName:"optional"}],F=a({table:[]}),G=a({table:[]}),P=a({id:0,project_type:"",project_price:null,project_agent_price:null,project_api:-1,project_remarks:"",project_tips:"",project_state:!0,project_agent_state:!1}),Q=a({project_type:"",project_price:null,project_agent_price:null,project_remarks:""}),R=a({fc:"",data:""}),W=a({id:0}),q=t(!1),K=t(!1),X=t(!1),Z=t(),$=async e=>{await H(e).then((e=>{Y.current=e.data.page,F.table=e.data.page_data,F.table.forEach((e=>{e.CreatedAt=N(e.CreatedAt).format("YYYY-MM-DD HH:mm:ss")}))}))};$(Y.current);const ee=()=>{P.project_type?P.project_price?(Z.value&&G.table.forEach((e=>{e.forward_name===Z.value?P.project_api=e.id:P.project_api=-1})),M(P).then((e=>{2e3===e.code&&(m.success("修改成功"),$(Y.current))})),X.value=!1):m.error("项目价格不能为空"):m.error("项目类名不能为空")},ae=()=>{X.value=!1},te=()=>{q.value=!0},le=()=>{Q.project_type?Q.project_price?(A(Q).then((e=>{2e3===e.code&&(m.success("添加成功"),$(Y.current))})),q.value=!1):m.error("项目价格不能为空"):m.error("项目类名不能为空")},oe=()=>{q.value=!1},re=()=>{K.value=!0},de=e=>{R.fc=e},ce=()=>{R.fc?R.data?(O(R).then((e=>{2e3===e.code&&(m.success("检索成功"),R.data="",F.table=e.data,F.table.forEach((e=>{e.CreatedAt=N(e.CreatedAt).format("YYYY-MM-DD HH:mm:ss")})))})),Y.current=1,K.value=!1):m.error("检索值不能为空"):m.error("检索方法不能为空")},pe=()=>{K.value=!1},ne=()=>{$(1)},ie=e=>{Z.value=e},se=e=>{T().then((a=>{2e3===a.code&&(G.table=a.data,G.table.forEach((a=>{a.id===e?Z.value=a.forward_name:Z.value=""})))}))};return(e,a)=>{const t=l("icon-plus"),H=j,M=l("icon-search"),A=l("icon-refresh"),O=f,N=b,T=V,ue=g,_e=v,me=x,je=k,fe=y,be=h,Ve=l("icon-edit"),ge=l("icon-delete"),ve=C,xe=I,ke=U,ye=w,he=D;return o(),r(i,null,[d(H,{type:"outline",onClick:te},{icon:c((()=>[d(t)])),default:c((()=>[p("添加")])),_:1}),p("   "),d(H,{type:"outline",onClick:re},{icon:c((()=>[d(M)])),default:c((()=>[p("搜索")])),_:1}),p("   "),d(H,{type:"outline",status:"success",onClick:ne},{icon:c((()=>[d(A)])),default:c((()=>[p("重置")])),_:1}),d(_e,{width:500,visible:q.value,"unmount-on-close":"","ok-text":"添加项目",onOk:le,onCancel:oe},{title:c((()=>[p(" 添加项目 ")])),default:c((()=>[n("div",null,[d(ue,{model:Q,layout:"vertical"},{default:c((()=>[d(N,{field:"project_type",label:"项目类名"},{default:c((()=>[d(O,{modelValue:Q.project_type,"onUpdate:modelValue":a[0]||(a[0]=e=>Q.project_type=e)},null,8,["modelValue"])])),_:1}),d(N,{field:"project_price",label:"项目价格"},{default:c((()=>[d(T,{modelValue:Q.project_price,"onUpdate:modelValue":a[1]||(a[1]=e=>Q.project_price=e)},null,8,["modelValue"])])),_:1}),d(N,{field:"project_agent_price",label:"项目代理价格"},{default:c((()=>[d(T,{modelValue:Q.project_agent_price,"onUpdate:modelValue":a[2]||(a[2]=e=>Q.project_agent_price=e)},null,8,["modelValue"])])),_:1}),d(N,{field:"project_remarks",label:"项目名称"},{default:c((()=>[d(O,{modelValue:Q.project_remarks,"onUpdate:modelValue":a[3]||(a[3]=e=>Q.project_remarks=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["visible"]),d(_e,{width:500,visible:K.value,"unmount-on-close":"","ok-text":"检索",onOk:ce,onCancel:pe},{title:c((()=>[p(" 用户编辑 ")])),default:c((()=>[n("div",null,[d(ue,{model:R,layout:"vertical"},{default:c((()=>[d(N,{field:"email",label:"检索内容"},{default:c((()=>[d(je,{placeholder:"选择检索项",onChange:de},{default:c((()=>[d(me,null,{default:c((()=>[p("项目类名")])),_:1}),d(me,null,{default:c((()=>[p("项目备注")])),_:1})])),_:1})])),_:1}),d(N,{field:"points",label:"欲检索内容"},{default:c((()=>[d(O,{modelValue:R.data,"onUpdate:modelValue":a[4]||(a[4]=e=>R.data=e),placeholder:"值（支持模糊搜索）"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["visible"]),d(fe),d(xe,{pagination:!1,columns:z,data:F.table},{project_state:c((({record:e})=>[!0===e.project_state?(o(),r("span",B,[d(be,{bordered:"",color:"green"},{default:c((()=>[p("允许下单")])),_:1})])):(o(),r("span",J,[d(be,{bordered:"",color:"red"},{default:c((()=>[p("暂停下单")])),_:1})]))])),project_agent_state:c((({record:e})=>[!0===e.project_agent_state?(o(),r("span",L,[d(be,{bordered:"",color:"green"},{default:c((()=>[p("允许下单")])),_:1})])):(o(),r("span",S,[d(be,{bordered:"",color:"red"},{default:c((()=>[p("暂停下单")])),_:1})]))])),optional:c((({record:e})=>[d(H,{type:"text",onClick:a=>(async e=>{P.id=e.ID,P.project_type=e.project_type,P.project_price=e.project_price,P.project_agent_price=e.project_agent_price,P.project_api=e.project_api,P.project_remarks=e.project_remarks,P.project_tips=e.project_tips,P.project_state=e.project_state,P.project_agent_state=e.project_agent_state,await se(e.project_api),X.value=!0})(e)},{icon:c((()=>[d(Ve)])),default:c((()=>[p("修改")])),_:2},1032,["onClick"]),p("  "),d(ve,{content:"确认删除项目？",onOk:a=>{return t=e.ID,W.id=t,void E(W).then((e=>{2e3===e.code&&(m.success("删除成功"),$(Y.current))}));var t}},{default:c((()=>[d(H,{type:"text",status:"danger"},{icon:c((()=>[d(ge)])),default:c((()=>[p("删除")])),_:1})])),_:2},1032,["onOk"])])),_:1},8,["data"]),d(ke,{style:{float:"right","margin-top":"10px","margin-right":"20px","margin-bottom":"10px"},total:10*Y.current,simple:"",onChange:$},null,8,["total"]),d(_e,{width:500,visible:X.value,"unmount-on-close":"",onOk:ee,onCancel:ae},{title:c((()=>[p(" 项目编辑 ")])),default:c((()=>[n("div",null,[d(ue,{model:P,layout:"vertical"},{default:c((()=>[d(N,{field:"email",label:"项目类名"},{default:c((()=>[d(O,{modelValue:P.project_type,"onUpdate:modelValue":a[5]||(a[5]=e=>P.project_type=e)},null,8,["modelValue"])])),_:1}),d(N,{field:"points",label:"项目价格"},{default:c((()=>[d(T,{modelValue:P.project_price,"onUpdate:modelValue":a[6]||(a[6]=e=>P.project_price=e)},null,8,["modelValue"])])),_:1}),d(N,{field:"project_agent_price",label:"项目代理价格"},{default:c((()=>[d(T,{modelValue:P.project_agent_price,"onUpdate:modelValue":a[7]||(a[7]=e=>P.project_agent_price=e)},null,8,["modelValue"])])),_:1}),d(N,{field:"forward_name",label:"绑定转发"},{default:c((()=>[d(je,{modelValue:Z.value,"onUpdate:modelValue":a[8]||(a[8]=e=>Z.value=e),placeholder:"选择已添加转发项",onChange:ie},{default:c((()=>[(o(!0),r(i,null,s(G.table,(e=>(o(),u(me,{key:e.id},{default:c((()=>[p(_(e.forward_name),1)])),_:2},1024)))),128))])),_:1},8,["modelValue"])])),_:1}),d(N,{field:"project_remarks",label:"项目名称"},{default:c((()=>[d(O,{modelValue:P.project_remarks,"onUpdate:modelValue":a[9]||(a[9]=e=>P.project_remarks=e)},null,8,["modelValue"])])),_:1}),d(N,{field:"is_state",label:"是否允许下单"},{default:c((()=>[d(ye,{modelValue:P.project_state,"onUpdate:modelValue":a[10]||(a[10]=e=>P.project_state=e)},null,8,["modelValue"])])),_:1}),d(N,{field:"project_agent_state",label:"代理是否允许下单"},{default:c((()=>[d(ye,{modelValue:P.project_agent_state,"onUpdate:modelValue":a[11]||(a[11]=e=>P.project_agent_state=e)},null,8,["modelValue"])])),_:1}),d(N,{field:"project_tips",label:"任务提示"},{default:c((()=>[d(he,{modelValue:P.project_tips,"onUpdate:modelValue":a[12]||(a[12]=e=>P.project_tips=e),placeholder:"任务提示内容(支持HTML渲染)","allow-clear":"","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["visible"])],64)}}}),F={class:"container"},G={class:"left-side",style:{"margin-top":"12px"}},P={class:"panel"},Q=Y(e({name:"Task",setup:e=>(e,a)=>{const t=l("Breadcrumb");return o(),r("div",F,[d(t,{items:["项目管理"]}),n("div",G,[n("div",P,[d(z)])])])}}),[["__scopeId","data-v-37ff799d"]]);export{Q as default};
