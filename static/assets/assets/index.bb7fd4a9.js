import{d as e,r as a,e as r,aJ as t,A as d,B as l,aG as n,aF as o,aL as s,E as i,aI as m,aT as p,aU as u,b0 as _,b1 as f,bK as c,b6 as w,aW as I,bI as b,bJ as v,b7 as x,bR as y,bQ as h,bN as g,b4 as D}from"./arco.6fa229d2.js";import{_ as j}from"./index.ca0933e3.js";/* empty css              *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css                */import{m as V}from"./moment.20765af1.js";import{a as k,u as C,f as U,b as A,d as Y,c as O}from"./forward.5672f451.js";import"./chart.f78d3971.js";import"./vue.17197c5c.js";import"./_commonjs-dynamic-modules.30ae7933.js";const P=i("h2",null,"注意事项",-1),H=i("p",null,"1、转发地址和退单地址均需要支持POST请求",-1),M=i("p",null,[s("2、转发地址和退单地址在接收请求成功后需要返回"),i("code",null,'{"code": 2000}'),s(" 作为成功标识")],-1),T=i("p",null,"3、如果请求失败或返回非2000，订单将进入任务延迟队列。任务队列将每三分钟尝试再次发起请求（共五次）。超出尝试次数，订单将自动退款",-1),E=i("p",null,"4、任务队列在系统内部内置，基于内存实现，重启服务系统将导致任务队列丢失",-1),S=i("p",null,"5、系统只会对转发订单进行退款，退款转发如达到条件上限，则将移除任务队列，不进行任何操作",-1),B=i("p",null,"测试API将会使用管理员身份生成一条假数据发送至API接口",-1),J=i("p",null,null,-1),N=i("h2",null,"注意事项",-1),z=i("p",null,"1、转发地址和退单地址均需要支持POST请求",-1),F=i("p",null,[s("2、转发地址和退单地址在接收请求成功后需要返回"),i("code",null,'{"code": 2000}'),s(" 作为成功标识")],-1),G=i("p",null,"3、如果请求失败或返回非2000，订单将进入任务延迟队列。任务队列将每三分钟尝试再次发起请求（共五次）。超出尝试次数，订单将自动退款",-1),K=i("p",null,"4、任务队列在系统内部内置，基于内存实现，重启服务系统将导致任务队列丢失",-1),L=i("p",null,"5、系统只会对转发订单进行退款，退款转发如达到条件上限，则将移除任务队列，不进行任何操作",-1),Q=i("h2",null,"转发参数解释",-1),R=e({__name:"table-data",setup(e){const j={current:1,pageSize:20},R=[{title:"ID",dataIndex:"ID"},{title:"转发名称",dataIndex:"forward_name"},{title:"订单转发地址",dataIndex:"forward_address",ellipsis:!0,tooltip:!0,width:300},{title:"退单转发地址",dataIndex:"forward_refund_address",ellipsis:!0,tooltip:!0,width:300},{title:"创建时间",dataIndex:"CreatedAt"},{title:"操作",slotName:"optional"}],W=a({table:[]}),q=[{title:"ID",dataIndex:"ID"},{title:"参数名称",dataIndex:"parameter_name"},{title:"参数类型",dataIndex:"parameter_type"},{title:"参数解释",dataIndex:"parameter_interpretation"}],X=[{ID:1,parameter_name:"order_task_type",parameter_type:"string",parameter_interpretation:"订单类型"},{ID:2,parameter_name:"order_id",parameter_type:"string",parameter_interpretation:"订单ID"},{ID:3,parameter_name:"order_uid",parameter_type:"string",parameter_interpretation:"订单所属用户UID"},{ID:4,parameter_name:"order_tickets",parameter_type:"int64",parameter_interpretation:"订单所需点券"},{ID:5,parameter_name:"order_number",parameter_type:"int",parameter_interpretation:"订单任务数量"},{ID:6,parameter_name:"order_variable",parameter_type:"string",parameter_interpretation:"任务变量"},{ID:7,parameter_name:"order_remarks",parameter_type:"string",parameter_interpretation:"订单备注"},{ID:8,parameter_name:"order_state",parameter_type:"int",parameter_interpretation:"订单状态（-1：等待中、0：进行中、1：已完成、2：已终止、3：退款中、4：已退款）"},{ID:9,parameter_name:"order_state_reason",parameter_type:"string",parameter_interpretation:"订单终止原因"},{ID:10,parameter_name:"order_status",parameter_type:"string",parameter_interpretation:"订单实况"},{ID:11,parameter_name:"order_ip",parameter_type:"string",parameter_interpretation:"操作用户IP"}],Z=[{ID:1,parameter_name:"order_id",parameter_type:"string",parameter_interpretation:"订单ID"},{ID:2,parameter_name:"order_uid",parameter_type:"string",parameter_interpretation:"订单所属用户UID"}],$=a({fc:"",data:""}),ee=a({id:0,forward_name:"",forward_address:"",forward_refund_address:""}),ae=a({forward_name:"",forward_address:"",forward_refund_address:""}),re=r(!1),te=r(!1),de=r(!1),le=async e=>{await k(e).then((e=>{j.current=e.data.page,W.table=e.data.page_data,W.table.forEach((e=>{e.CreatedAt=V(e.CreatedAt).format("YYYY-MM-DD HH:mm:ss")}))}))};le(j.current);const ne=()=>{ee.forward_name?ee.forward_address?ee.forward_refund_address?(C(ee).then((e=>{2e3===e.code&&(p.success("修改成功"),le(j.current))})),de.value=!1):p.error("退单转发地址不能为空"):p.error("订单转发地址不能为空"):p.error("转发名称不能为空")},oe=()=>{de.value=!1},se=()=>{te.value=!0},ie=e=>{$.fc=e},me=()=>{$.fc?$.data?(U($).then((e=>{2e3===e.code&&(p.success("检索成功"),$.data="",W.table=e.data,W.table.forEach((e=>{e.CreatedAt=V(e.CreatedAt).format("YYYY-MM-DD HH:mm:ss")})))})),j.current=1,te.value=!1):p.error("检索值不能为空"):p.error("检索方法不能为空")},pe=()=>{te.value=!1},ue=()=>{re.value=!0},_e=()=>{ae.forward_name?ae.forward_address?ae.forward_refund_address?(A(ae).then((e=>{2e3===e.code&&(p.success("添加成功"),le(j.current))})),re.value=!1):p.error("退单地址不能为空"):p.error("转发地址不能为空"):p.error("转发名称不能为空")},fe=()=>{re.value=!1},ce=()=>{le(1)},we=()=>{const e={forward_address:ee.forward_address,forward_refund_address:ee.forward_refund_address};O(e).then((e=>{2e3===e.code&&p.success(e.mag)}))};return(e,a)=>{const r=t("icon-plus"),V=u,k=t("icon-search"),C=t("icon-refresh"),U=_,A=f,O=c,Ie=w,be=I,ve=b,xe=v,ye=x,he=t("icon-edit"),ge=t("icon-delete"),De=y,je=h,Ve=g,ke=t("icon-sync"),Ce=D;return d(),l(m,null,[n(V,{type:"outline",onClick:ue},{icon:o((()=>[n(r)])),default:o((()=>[s("添加")])),_:1}),s("   "),n(V,{type:"outline",onClick:se},{icon:o((()=>[n(k)])),default:o((()=>[s("搜索")])),_:1}),s("   "),n(V,{type:"outline",status:"success",onClick:ce},{icon:o((()=>[n(C)])),default:o((()=>[s("重置")])),_:1}),n(be,{width:500,visible:re.value,"unmount-on-close":"","ok-text":"添加转发",onOk:_e,onCancel:fe},{title:o((()=>[s(" 添加转发 ")])),default:o((()=>[i("div",null,[n(Ie,{model:ae,layout:"vertical"},{default:o((()=>[n(A,{field:"project_type",label:"转发名称"},{default:o((()=>[n(U,{modelValue:ae.forward_name,"onUpdate:modelValue":a[0]||(a[0]=e=>ae.forward_name=e)},null,8,["modelValue"])])),_:1}),n(A,{field:"project_price",label:"转发地址"},{default:o((()=>[n(O,{modelValue:ae.forward_address,"onUpdate:modelValue":a[1]||(a[1]=e=>ae.forward_address=e)},null,8,["modelValue"])])),_:1}),n(A,{field:"project_agent_price",label:"退单地址"},{default:o((()=>[n(O,{modelValue:ae.forward_refund_address,"onUpdate:modelValue":a[2]||(a[2]=e=>ae.forward_refund_address=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),P,H,M,T,E,S])])),_:1},8,["visible"]),n(be,{width:500,visible:te.value,"unmount-on-close":"","ok-text":"检索",onOk:me,onCancel:pe},{title:o((()=>[s(" 订单搜索 ")])),default:o((()=>[i("div",null,[n(Ie,{model:$,layout:"vertical"},{default:o((()=>[n(A,{field:"email",label:"检索内容"},{default:o((()=>[n(xe,{placeholder:"选择检索项",onChange:ie},{default:o((()=>[n(ve,null,{default:o((()=>[s("转发名称")])),_:1})])),_:1})])),_:1}),n(A,{field:"points",label:"欲检索内容"},{default:o((()=>[n(U,{modelValue:$.data,"onUpdate:modelValue":a[3]||(a[3]=e=>$.data=e),placeholder:"值（支持模糊搜索）"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["visible"]),n(ye),n(je,{pagination:!1,columns:R,data:W.table},{optional:o((({record:e})=>[n(V,{type:"text",onClick:a=>(e=>{ee.id=e.ID,ee.forward_name=e.forward_name,ee.forward_address=e.forward_address,ee.forward_refund_address=e.forward_refund_address,de.value=!0})(e)},{icon:o((()=>[n(he)])),default:o((()=>[s("修改")])),_:2},1032,["onClick"]),n(De,{content:"确认删除转发？",onOk:a=>{return r=e.ID,void Y({id:r}).then((e=>{2e3===e.code&&(p.success("删除成功"),le(j.current))}));var r}},{default:o((()=>[n(V,{type:"text",status:"danger"},{icon:o((()=>[n(ge)])),default:o((()=>[s("删除")])),_:1})])),_:2},1032,["onOk"])])),_:1},8,["data"]),n(Ve,{style:{float:"right","margin-top":"10px","margin-right":"20px","margin-bottom":"10px"},total:10*j.current,simple:"",onChange:le},null,8,["total"]),n(be,{width:500,visible:de.value,"unmount-on-close":"",onOk:ne,onCancel:oe},{title:o((()=>[s(" 转发编辑 ")])),default:o((()=>[i("div",null,[n(Ie,{model:ee,layout:"vertical"},{default:o((()=>[n(A,{field:"email",label:"转发名称"},{default:o((()=>[n(U,{modelValue:ee.forward_name,"onUpdate:modelValue":a[4]||(a[4]=e=>ee.forward_name=e)},null,8,["modelValue"])])),_:1}),n(A,{field:"points",label:"订单转发地址"},{default:o((()=>[n(O,{modelValue:ee.forward_address,"onUpdate:modelValue":a[5]||(a[5]=e=>ee.forward_address=e)},null,8,["modelValue"])])),_:1}),n(A,{field:"email",label:"退单转发地址"},{default:o((()=>[n(O,{modelValue:ee.forward_refund_address,"onUpdate:modelValue":a[6]||(a[6]=e=>ee.forward_refund_address=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),n(V,{type:"outline",onClick:we},{icon:o((()=>[n(ke)])),default:o((()=>[s("测试API")])),_:1}),B,J,N,z,F,G,K,L])])),_:1},8,["visible"]),n(ye),i("div",null,[Q,i("h3",null,[s("订单转发接口 "),i("span",null,[n(Ce,{href:"/v1/api/order/forward/demonstrate",icon:""},{default:o((()=>[s(" 查看演示")])),_:1})])]),n(je,{pagination:!1,columns:q,data:X}),i("h3",null,[s("退单转发接口 "),i("span",null,[n(Ce,{href:"/v1/api/order/refund/demonstrate",icon:""},{default:o((()=>[s(" 查看演示")])),_:1})])]),n(je,{pagination:!1,columns:q,data:Z})])],64)}}}),W={class:"container"},q={class:"left-side",style:{"margin-top":"12px"}},X={class:"panel"},Z=j(e({name:"Task",setup:e=>(e,a)=>{const r=t("Breadcrumb");return d(),l("div",W,[n(r,{items:["订单转发"]}),i("div",q,[i("div",X,[n(R)])])])}}),[["__scopeId","data-v-62c9447f"]]);export{Z as default};
