import{d as H,r as C,e as y,aJ as D,A as _,B as E,aG as e,aF as t,aL as n,E as g,aI as P,aH as pe,aC as _e,aM as ie,aT as s,aU as me,b0 as fe,b1 as Ee,aR as je,b6 as Ce,aW as De,bH as Fe,bI as be,b7 as ge,bO as Be,bQ as ve,bP as Ae,bM as ke,aS as Ve,bJ as he}from"./arco.d4bcacf5.js";import{_ as ye}from"./index.408bb41d.js";/* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css               */import{b as xe,u as we,c as Ie,p as Ue,d as Se}from"./task.94e24c51.js";import{m as Y}from"./moment.b4a440e7.js";import{g as Oe}from"./forward.7499f791.js";import"./chart.b90db84f.js";import"./vue.5c43e2ab.js";import"./_commonjs-dynamic-modules.30ae7933.js";const Me={key:0},Pe={key:1},Ye={key:0},He={key:1},Ne=H({__name:"table-data",setup(N){const d={current:1,pageSize:20},U=[{title:"ID",dataIndex:"ID"},{title:"\u9879\u76EE\u7C7B\u540D",dataIndex:"project_type"},{title:"\u9879\u76EE\u4EF7\u683C",dataIndex:"project_price"},{title:"\u9879\u76EE\u4EE3\u7406\u4EF7\u683C",dataIndex:"project_agent_price"},{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"project_remarks"},{title:"\u9879\u76EE\u72B6\u6001",dataIndex:"project_state",slotName:"project_state"},{title:"\u9879\u76EE\u4EE3\u7406\u72B6\u6001",dataIndex:"project_agent_state",slotName:"project_agent_state"},{title:"\u6DFB\u52A0\u65F6\u95F4",dataIndex:"CreatedAt"},{title:"\u64CD\u4F5C",slotName:"optional"}],i=C({table:[]}),B=C({table:[]}),l=C({id:0,project_type:"",project_price:null,project_agent_price:null,project_api:-1,project_remarks:"",project_tips:"",project_state:!0,project_agent_state:!1}),c=C({project_type:"",project_price:null,project_agent_price:null,project_remarks:""}),p=C({fc:"",data:""}),S=C({id:0}),v=y(!1),A=y(!1),k=y(!1),m=y(),j=async o=>{await xe(o).then(u=>{d.current=u.data.page,i.table=u.data.page_data,i.table.forEach(f=>{f.CreatedAt=Y(f.CreatedAt).format("YYYY-MM-DD HH:mm:ss")})})};j(d.current);const T=async o=>{l.id=o.ID,l.project_type=o.project_type,l.project_price=o.project_price,l.project_agent_price=o.project_agent_price,l.project_api=o.project_api,l.project_remarks=o.project_remarks,l.project_tips=o.project_tips,l.project_state=o.project_state,l.project_agent_state=o.project_agent_state,await ee(o.project_api),k.value=!0},$=()=>{if(!l.project_type){s.error("\u9879\u76EE\u7C7B\u540D\u4E0D\u80FD\u4E3A\u7A7A");return}if(!l.project_price){s.error("\u9879\u76EE\u4EF7\u683C\u4E0D\u80FD\u4E3A\u7A7A");return}m.value&&B.table.forEach(o=>{o.forward_name===m.value?l.project_api=o.id:l.project_api=-1}),we(l).then(o=>{o.code===2e3&&(s.success("\u4FEE\u6539\u6210\u529F"),j(d.current))}),k.value=!1},L=()=>{k.value=!1},J=()=>{v.value=!0},R=()=>{if(!c.project_type){s.error("\u9879\u76EE\u7C7B\u540D\u4E0D\u80FD\u4E3A\u7A7A");return}if(!c.project_price){s.error("\u9879\u76EE\u4EF7\u683C\u4E0D\u80FD\u4E3A\u7A7A");return}Ie(c).then(o=>{o.code===2e3&&(s.success("\u6DFB\u52A0\u6210\u529F"),j(d.current))}),v.value=!1},z=()=>{v.value=!1},G=()=>{A.value=!0},Q=o=>{p.fc=o},W=()=>{if(!p.fc){s.error("\u68C0\u7D22\u65B9\u6CD5\u4E0D\u80FD\u4E3A\u7A7A");return}if(!p.data){s.error("\u68C0\u7D22\u503C\u4E0D\u80FD\u4E3A\u7A7A");return}Ue(p).then(o=>{o.code===2e3&&(s.success("\u68C0\u7D22\u6210\u529F"),p.data="",i.table=o.data,i.table.forEach(u=>{u.CreatedAt=Y(u.CreatedAt).format("YYYY-MM-DD HH:mm:ss")}))}),d.current=1,A.value=!1},q=()=>{A.value=!1},K=()=>{j(1)},X=o=>{S.id=o,Se(S).then(u=>{u.code===2e3&&(s.success("\u5220\u9664\u6210\u529F"),j(d.current))})},Z=o=>{m.value=o},ee=o=>{Oe().then(u=>{u.code===2e3&&(B.table=u.data,B.table.forEach(f=>{f.id===o?m.value=f.forward_name:m.value=""}))})};return(o,u)=>{const f=D("icon-plus"),F=me,te=D("icon-search"),ue=D("icon-refresh"),b=fe,r=Ee,V=je,x=Ce,w=De,I=Fe,O=be,ae=ge,h=Be,oe=D("icon-edit"),le=D("icon-delete"),ne=ve,re=Ae,ce=ke,M=Ve,se=he;return _(),E(P,null,[e(F,{type:"outline",onClick:J},{icon:t(()=>[e(f)]),default:t(()=>[n("\u6DFB\u52A0")]),_:1}),n(" \u2002 "),e(F,{type:"outline",onClick:G},{icon:t(()=>[e(te)]),default:t(()=>[n("\u641C\u7D22")]),_:1}),n(" \u2002 "),e(F,{type:"outline",status:"success",onClick:K},{icon:t(()=>[e(ue)]),default:t(()=>[n("\u91CD\u7F6E")]),_:1}),e(w,{width:500,visible:v.value,"unmount-on-close":"","ok-text":"\u6DFB\u52A0\u9879\u76EE",onOk:R,onCancel:z},{title:t(()=>[n(" \u6DFB\u52A0\u9879\u76EE ")]),default:t(()=>[g("div",null,[e(x,{model:c,layout:"vertical"},{default:t(()=>[e(r,{field:"project_type",label:"\u9879\u76EE\u7C7B\u540D"},{default:t(()=>[e(b,{modelValue:c.project_type,"onUpdate:modelValue":u[0]||(u[0]=a=>c.project_type=a)},null,8,["modelValue"])]),_:1}),e(r,{field:"project_price",label:"\u9879\u76EE\u4EF7\u683C"},{default:t(()=>[e(V,{modelValue:c.project_price,"onUpdate:modelValue":u[1]||(u[1]=a=>c.project_price=a)},null,8,["modelValue"])]),_:1}),e(r,{field:"project_agent_price",label:"\u9879\u76EE\u4EE3\u7406\u4EF7\u683C"},{default:t(()=>[e(V,{modelValue:c.project_agent_price,"onUpdate:modelValue":u[2]||(u[2]=a=>c.project_agent_price=a)},null,8,["modelValue"])]),_:1}),e(r,{field:"project_remarks",label:"\u9879\u76EE\u540D\u79F0"},{default:t(()=>[e(b,{modelValue:c.project_remarks,"onUpdate:modelValue":u[3]||(u[3]=a=>c.project_remarks=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["visible"]),e(w,{width:500,visible:A.value,"unmount-on-close":"","ok-text":"\u68C0\u7D22",onOk:W,onCancel:q},{title:t(()=>[n(" \u7528\u6237\u7F16\u8F91 ")]),default:t(()=>[g("div",null,[e(x,{model:p,layout:"vertical"},{default:t(()=>[e(r,{field:"email",label:"\u68C0\u7D22\u5185\u5BB9"},{default:t(()=>[e(O,{placeholder:"\u9009\u62E9\u68C0\u7D22\u9879",onChange:Q},{default:t(()=>[e(I,null,{default:t(()=>[n("\u9879\u76EE\u7C7B\u540D")]),_:1}),e(I,null,{default:t(()=>[n("\u9879\u76EE\u5907\u6CE8")]),_:1})]),_:1})]),_:1}),e(r,{field:"points",label:"\u6B32\u68C0\u7D22\u5185\u5BB9"},{default:t(()=>[e(b,{modelValue:p.data,"onUpdate:modelValue":u[4]||(u[4]=a=>p.data=a),placeholder:"\u503C\uFF08\u652F\u6301\u6A21\u7CCA\u641C\u7D22\uFF09"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["visible"]),e(ae),e(re,{pagination:!1,columns:U,data:i.table},{project_state:t(({record:a})=>[a.project_state===!0?(_(),E("span",Me,[e(h,{bordered:"",color:"green"},{default:t(()=>[n("\u5141\u8BB8\u4E0B\u5355")]),_:1})])):(_(),E("span",Pe,[e(h,{bordered:"",color:"red"},{default:t(()=>[n("\u6682\u505C\u4E0B\u5355")]),_:1})]))]),project_agent_state:t(({record:a})=>[a.project_agent_state===!0?(_(),E("span",Ye,[e(h,{bordered:"",color:"green"},{default:t(()=>[n("\u5141\u8BB8\u4E0B\u5355")]),_:1})])):(_(),E("span",He,[e(h,{bordered:"",color:"red"},{default:t(()=>[n("\u6682\u505C\u4E0B\u5355")]),_:1})]))]),optional:t(({record:a})=>[e(F,{type:"text",onClick:de=>T(a)},{icon:t(()=>[e(oe)]),default:t(()=>[n("\u4FEE\u6539")]),_:2},1032,["onClick"]),n("\u2002 "),e(ne,{content:"\u786E\u8BA4\u5220\u9664\u9879\u76EE\uFF1F",onOk:de=>X(a.ID)},{default:t(()=>[e(F,{type:"text",status:"danger"},{icon:t(()=>[e(le)]),default:t(()=>[n("\u5220\u9664")]),_:1})]),_:2},1032,["onOk"])]),_:1},8,["data"]),e(ce,{style:{float:"right","margin-top":"10px","margin-right":"20px","margin-bottom":"10px"},total:d.current*10,simple:"",onChange:j},null,8,["total"]),e(w,{width:500,visible:k.value,"unmount-on-close":"",onOk:$,onCancel:L},{title:t(()=>[n(" \u9879\u76EE\u7F16\u8F91 ")]),default:t(()=>[g("div",null,[e(x,{model:l,layout:"vertical"},{default:t(()=>[e(r,{field:"email",label:"\u9879\u76EE\u7C7B\u540D"},{default:t(()=>[e(b,{modelValue:l.project_type,"onUpdate:modelValue":u[5]||(u[5]=a=>l.project_type=a)},null,8,["modelValue"])]),_:1}),e(r,{field:"points",label:"\u9879\u76EE\u4EF7\u683C"},{default:t(()=>[e(V,{modelValue:l.project_price,"onUpdate:modelValue":u[6]||(u[6]=a=>l.project_price=a)},null,8,["modelValue"])]),_:1}),e(r,{field:"project_agent_price",label:"\u9879\u76EE\u4EE3\u7406\u4EF7\u683C"},{default:t(()=>[e(V,{modelValue:l.project_agent_price,"onUpdate:modelValue":u[7]||(u[7]=a=>l.project_agent_price=a)},null,8,["modelValue"])]),_:1}),e(r,{field:"forward_name",label:"\u7ED1\u5B9A\u8F6C\u53D1"},{default:t(()=>[e(O,{modelValue:m.value,"onUpdate:modelValue":u[8]||(u[8]=a=>m.value=a),placeholder:"\u9009\u62E9\u5DF2\u6DFB\u52A0\u8F6C\u53D1\u9879",onChange:Z},{default:t(()=>[(_(!0),E(P,null,pe(B.table,a=>(_(),_e(I,{key:a.id},{default:t(()=>[n(ie(a.forward_name),1)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1}),e(r,{field:"project_remarks",label:"\u9879\u76EE\u540D\u79F0"},{default:t(()=>[e(b,{modelValue:l.project_remarks,"onUpdate:modelValue":u[9]||(u[9]=a=>l.project_remarks=a)},null,8,["modelValue"])]),_:1}),e(r,{field:"is_state",label:"\u662F\u5426\u5141\u8BB8\u4E0B\u5355"},{default:t(()=>[e(M,{modelValue:l.project_state,"onUpdate:modelValue":u[10]||(u[10]=a=>l.project_state=a)},null,8,["modelValue"])]),_:1}),e(r,{field:"project_agent_state",label:"\u4EE3\u7406\u662F\u5426\u5141\u8BB8\u4E0B\u5355"},{default:t(()=>[e(M,{modelValue:l.project_agent_state,"onUpdate:modelValue":u[11]||(u[11]=a=>l.project_agent_state=a)},null,8,["modelValue"])]),_:1}),e(r,{field:"project_tips",label:"\u4EFB\u52A1\u63D0\u793A"},{default:t(()=>[e(se,{modelValue:l.project_tips,"onUpdate:modelValue":u[12]||(u[12]=a=>l.project_tips=a),placeholder:"\u4EFB\u52A1\u63D0\u793A\u5185\u5BB9(\u652F\u6301HTML\u6E32\u67D3)","allow-clear":"","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["visible"])],64)}}}),Te={class:"container"},$e={class:"left-side",style:{"margin-top":"12px"}},Le={class:"panel"},Je={name:"Task"},Re=H({...Je,setup(N){return(d,U)=>{const i=D("Breadcrumb");return _(),E("div",Te,[e(i,{items:["\u9879\u76EE\u7BA1\u7406"]}),g("div",$e,[g("div",Le,[e(Ne)])])])}}});const it=ye(Re,[["__scopeId","data-v-37ff799d"]]);export{it as default};
