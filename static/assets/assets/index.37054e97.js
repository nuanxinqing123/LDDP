import{d as S,r as x,e as A,aJ as B,A as d,B as r,aG as e,aF as t,aL as n,E,aI as K,aT as m,aU as Q,b7 as X,bH as Z,bI as ee,b1 as te,b0 as ae,b6 as ue,aW as oe,bO as le,bP as ne,bM as se,aR as ie,aS as de}from"./arco.d4bcacf5.js";import{p as re,q as _e,t as ce,_ as me}from"./index.408bb41d.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{m as U}from"./moment.b4a440e7.js";import"./chart.b90db84f.js";import"./vue.5c43e2ab.js";import"./_commonjs-dynamic-modules.30ae7933.js";const pe={key:0},fe={key:1},Ce={key:2},be={key:0},he={key:1},De=S({__name:"table-data",setup(w){const _={current:1,pageSize:20},F=[{title:"ID",dataIndex:"ID"},{title:"\u7528\u6237UID",dataIndex:"user_id"},{title:"\u7528\u6237\u90AE\u7BB1",dataIndex:"email"},{title:"\u7528\u6237\u70B9\u5238",dataIndex:"points"},{title:"\u89D2\u8272\u6743\u9650",dataIndex:"role",slotName:"role"},{title:"\u7528\u6237\u72B6\u6001",dataIndex:"is_state",slotName:"is_state"},{title:"\u767B\u5F55IP",dataIndex:"login_ip"},{title:"\u6CE8\u518C\u65F6\u95F4",dataIndex:"CreatedAt"},{title:"\u64CD\u4F5C",slotName:"optional"}],i=x({table:[]}),a=x({id:0,email:"",points:0,role:"",is_state:!1}),s=x({fc:"",data:""}),b=A(!1),h=A(!1),p=A("\u7528\u6237"),Y=u=>{s.fc=u},M=()=>{h.value=!0},N=()=>{if(!s.fc){m.error("\u68C0\u7D22\u65B9\u6CD5\u4E0D\u80FD\u4E3A\u7A7A");return}if(!s.data){m.error("\u68C0\u7D22\u503C\u4E0D\u80FD\u4E3A\u7A7A");return}re(s).then(u=>{u.code===2e3&&(m.success("\u68C0\u7D22\u6210\u529F"),s.data="",i.table=u.data,i.table.forEach(o=>{o.CreatedAt=U(o.CreatedAt).format("YYYY-MM-DD HH:mm:ss")}))}),_.current=1,h.value=!1},O=()=>{h.value=!1},H=u=>{u==="\u7528\u6237"?a.role="user":u==="\u4EE3\u7406"?a.role="proxy":u==="\u7BA1\u7406\u5458"&&(a.role="admin")},D=async u=>{await _e(u).then(o=>{_.current=o.data.page,i.table=o.data.page_data,i.table.forEach(v=>{v.CreatedAt=U(v.CreatedAt).format("YYYY-MM-DD HH:mm:ss")})})};D(_.current);const T=u=>{a.id=u.ID,a.email=u.email,a.points=u.points,a.is_state=u.is_state!==!0,u.role==="user"?(p.value="\u7528\u6237",a.role="user"):u.role==="proxy"?(p.value="\u4EE3\u7406",a.role="proxy"):u.role==="admin"&&(p.value="\u7BA1\u7406\u5458",a.role="admin"),b.value=!0},$=()=>{if(!a.email){m.error("\u7528\u6237\u90AE\u7BB1\u4E0D\u80FD\u4E3A\u7A7A");return}if(a.points<0){m.error("\u7528\u6237\u4F59\u989D\u4E0D\u80FD\u4E3A\u7A7A");return}a.is_state=a.is_state!==!0,ce(a).then(u=>{u.code===2e3&&(D(_.current),m.success(u.data))}),b.value=!1},P=()=>{b.value=!1},R=()=>{D(1)};return(u,o)=>{const v=B("icon-search"),g=Q,L=B("icon-refresh"),q=X,f=Z,k=ee,c=te,y=ae,I=ue,V=oe,C=le,z=B("icon-edit"),G=ne,J=se,W=ie,j=de;return d(),r(K,null,[e(g,{type:"outline",onClick:M},{icon:t(()=>[e(v)]),default:t(()=>[n("\u641C\u7D22")]),_:1}),n(" \u2002 "),e(g,{type:"outline",status:"success",onClick:R},{icon:t(()=>[e(L)]),default:t(()=>[n("\u91CD\u7F6E")]),_:1}),e(q),e(V,{width:500,visible:h.value,"unmount-on-close":"","ok-text":"\u68C0\u7D22",onOk:N,onCancel:O},{title:t(()=>[n(" \u7528\u6237\u7F16\u8F91 ")]),default:t(()=>[E("div",null,[e(I,{model:s,layout:"vertical"},{default:t(()=>[e(c,{field:"email",label:"\u68C0\u7D22\u5185\u5BB9"},{default:t(()=>[e(k,{placeholder:"\u9009\u62E9\u68C0\u7D22\u9879",onChange:Y},{default:t(()=>[e(f,null,{default:t(()=>[n("\u7528\u6237UID")]),_:1}),e(f,null,{default:t(()=>[n("\u7528\u6237\u90AE\u7BB1")]),_:1})]),_:1})]),_:1}),e(c,{field:"points",label:"\u6B32\u68C0\u7D22\u5185\u5BB9"},{default:t(()=>[e(y,{modelValue:s.data,"onUpdate:modelValue":o[0]||(o[0]=l=>s.data=l),placeholder:"\u503C\uFF08\u652F\u6301\u6A21\u7CCA\u641C\u7D22\uFF09"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["visible"]),e(G,{pagination:!1,columns:F,data:i.table},{role:t(({record:l})=>[l.role==="admin"?(d(),r("span",pe,[e(C,{bordered:"",color:"blue"},{default:t(()=>[n("\u7BA1\u7406\u5458")]),_:1})])):l.role==="proxy"?(d(),r("span",fe,[e(C,{bordered:"",color:"orange"},{default:t(()=>[n("\u4EE3\u7406")]),_:1})])):(d(),r("span",Ce,[e(C,{bordered:"",color:"gray"},{default:t(()=>[n("\u7528\u6237")]),_:1})]))]),is_state:t(({record:l})=>[l.is_state===!0?(d(),r("span",be,[e(C,{bordered:"",color:"green"},{default:t(()=>[n("\u6B63\u5E38")]),_:1})])):(d(),r("span",he,[e(C,{bordered:"",color:"red"},{default:t(()=>[n("\u5C01\u7981")]),_:1})]))]),optional:t(({record:l})=>[e(g,{type:"text",onClick:Ae=>T(l)},{icon:t(()=>[e(z)]),default:t(()=>[n("\u4FEE\u6539")]),_:2},1032,["onClick"])]),_:1},8,["data"]),e(J,{style:{float:"right","margin-top":"10px","margin-right":"20px","margin-bottom":"10px"},total:_.current*10,simple:"",onChange:D},null,8,["total"]),e(V,{width:500,visible:b.value,"unmount-on-close\xDF":"",onOk:$,onCancel:P},{title:t(()=>[n(" \u7528\u6237\u7F16\u8F91 ")]),default:t(()=>[E("div",null,[e(I,{model:a,layout:"vertical"},{default:t(()=>[e(c,{field:"email",label:"\u7528\u6237\u90AE\u7BB1"},{default:t(()=>[e(y,{modelValue:a.email,"onUpdate:modelValue":o[1]||(o[1]=l=>a.email=l)},null,8,["modelValue"])]),_:1}),e(c,{field:"points",label:"\u7528\u6237\u70B9\u5238"},{default:t(()=>[e(W,{modelValue:a.points,"onUpdate:modelValue":o[2]||(o[2]=l=>a.points=l)},null,8,["modelValue"])]),_:1}),e(c,{field:"is_admin",label:"\u89D2\u8272\u6743\u9650"},{default:t(()=>[e(k,{modelValue:p.value,"onUpdate:modelValue":o[3]||(o[3]=l=>p.value=l),placeholder:"\u9009\u62E9\u89D2\u8272\u6743\u9650",onChange:H},{default:t(()=>[e(f,null,{default:t(()=>[n("\u7528\u6237")]),_:1}),e(f,null,{default:t(()=>[n("\u4EE3\u7406")]),_:1}),e(f,null,{default:t(()=>[n("\u7BA1\u7406\u5458")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(c,{field:"is_state",label:"\u662F\u5426\u5C01\u7981"},{default:t(()=>[e(j,{modelValue:a.is_state,"onUpdate:modelValue":o[4]||(o[4]=l=>a.is_state=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["visible"])],64)}}}),ve={class:"container"},Be={class:"left-side",style:{"margin-top":"12px"}},Ee={class:"panel"},ge={name:"Task"},xe=S({...ge,setup(w){return(_,F)=>{const i=B("Breadcrumb");return d(),r("div",ve,[e(i,{items:["\u7528\u6237\u7BA1\u7406"]}),E("div",Be,[E("div",Ee,[e(De)])])])}}});const Le=me(xe,[["__scopeId","data-v-63d05c22"]]);export{Le as default};
